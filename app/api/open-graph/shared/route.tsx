import { ImageResponse } from 'next/og';
import { NextRequest } from 'next/server';

export const runtime = 'edge';

export async function GET(request: NextRequest) {
  try {
    const tagName = decodeURIComponent(
      request.nextUrl.searchParams.get('tag') || '',
    );

    const fontDataSemiBold = await fetch(
      new URL('../../../../fonts/Inter-SemiBold.ttf', import.meta.url),
    ).then((res) => res.arrayBuffer());

    const fontDataRegular = await fetch(
      new URL('../../../../fonts/Inter-Regular.ttf', import.meta.url),
    ).then((res) => res.arrayBuffer());

    return new ImageResponse(
      (
        <div tw="flex flex-col bg-[#1b1b1b] text-white w-full h-full px-16 py-8">
          <div tw="flex justify-between items-center">
            <div tw="flex items-center">
              {/* eslint-disable-next-line @next/next/no-img-element */}
              <img
                tw="rounded-full w-16 h-16 mr-6"
                src={`https://bmrk.cc/icons/icon.svg`}
                alt="favicon"
              />
              <div tw="flex max-w-full w-full items-center justify-between">
                <div tw="flex flex-col">
                  <h1 tw="font-bold text-[50px] mb-0">Bookmark It.</h1>
                  <p tw="italic mt-0 text-[#b3b3b3] text-lg font-normal">
                    Bookmark manager for the modern web.
                  </p>
                </div>
                <h3 tw="mr-20 text-2xl text-[#b3b3b3]">
                  Collection: <span tw="text-white ml-1">{tagName}</span>
                </h3>
              </div>
            </div>
          </div>

          <svg
            tw="ml-10"
            width={1016}
            height={667}
            viewBox="0 0 1016 667"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g filter="url(#filter0_d_25_285)">
              <g clipPath="url(#clip0_25_285)">
                <rect
                  x={48}
                  y={32}
                  width={920}
                  height={571}
                  rx={10}
                  fill="#fff"
                />
                <path
                  transform="translate(48 32)"
                  fill="#1F2224"
                  d="M0 0H920V42H0z"
                />
                <rect
                  x={69}
                  y={48}
                  width={12}
                  height={12}
                  rx={6}
                  fill="#EC6B5E"
                />
                <rect
                  x={89}
                  y={48}
                  width={12}
                  height={12}
                  rx={6}
                  fill="#F4BF4F"
                />
                <rect
                  x={109}
                  y={48}
                  width={12}
                  height={12}
                  rx={6}
                  fill="#61C453"
                />
                <g clipPath="url(#clip1_25_285)">
                  <path
                    d="M135 48a8 8 0 018-8h224a8 8 0 018 8v26H135V48z"
                    fill="#35363B"
                  />
                  <path
                    d="M149.084 56.197h-2.18l-.011-1.137h1.869c.32 0 .588-.044.802-.134.215-.09.377-.22.487-.393.113-.172.17-.38.17-.627 0-.273-.053-.496-.159-.668a.87.87 0 00-.48-.375c-.219-.082-.496-.123-.832-.123h-1.324V60h-1.612v-8.531h2.936c.484 0 .916.047 1.295.14.383.09.707.23.973.422.265.192.466.432.603.721.141.289.211.633.211 1.031 0 .352-.082.676-.246.973-.16.293-.408.531-.744.715-.332.183-.754.289-1.266.316l-.492.41zm-.07 3.803h-2.584l.674-1.266h1.91c.32 0 .584-.052.791-.158.211-.105.367-.25.468-.433.106-.188.159-.403.159-.645a1.58 1.58 0 00-.141-.691.949.949 0 00-.434-.452c-.195-.105-.453-.158-.773-.158h-1.676l.012-1.137h2.133l.369.44c.492.004.892.102 1.201.293.313.191.543.438.691.738.149.301.223.625.223.973 0 .547-.119 1.006-.357 1.377-.235.371-.578.65-1.032.838-.449.187-.994.281-1.634.281zm3.905-3.105v-.123c0-.465.066-.893.199-1.284a2.97 2.97 0 01.58-1.025c.254-.29.565-.514.932-.674a3.042 3.042 0 011.254-.246c.476 0 .898.082 1.266.246.371.16.683.385.937.674.254.289.447.63.58 1.025.133.39.199.819.199 1.284v.123c0 .46-.066.888-.199 1.283-.133.39-.326.732-.58 1.025-.254.29-.564.514-.932.674-.367.16-.787.24-1.259.24-.469 0-.889-.08-1.26-.24a2.603 2.603 0 01-.938-.674 3.042 3.042 0 01-.58-1.025 3.993 3.993 0 01-.199-1.283zm1.547-.123v.123c0 .277.027.537.082.779.055.242.139.455.252.639.113.183.26.328.439.433.184.102.403.152.657.152.25 0 .464-.05.644-.152.18-.105.326-.25.44-.434a1.98 1.98 0 00.257-.638c.055-.242.082-.502.082-.78v-.122c0-.274-.027-.53-.082-.768a1.98 1.98 0 00-.257-.639 1.234 1.234 0 00-1.096-.603 1.218 1.218 0 00-1.084.603 2.094 2.094 0 00-.252.639 3.408 3.408 0 00-.082.768zm5.13.123v-.123c0-.465.066-.893.199-1.284a2.97 2.97 0 01.58-1.025c.254-.29.565-.514.932-.674a3.042 3.042 0 011.254-.246c.476 0 .898.082 1.265.246.372.16.684.385.938.674.254.289.447.63.58 1.025.133.39.199.819.199 1.284v.123c0 .46-.066.888-.199 1.283-.133.39-.326.732-.58 1.025-.254.29-.565.514-.932.674-.367.16-.787.24-1.259.24-.469 0-.889-.08-1.26-.24a2.603 2.603 0 01-.938-.674 3.042 3.042 0 01-.58-1.025 3.993 3.993 0 01-.199-1.283zm1.547-.123v.123c0 .277.027.537.082.779.055.242.139.455.252.639.113.183.26.328.439.433.184.102.403.152.657.152.25 0 .464-.05.644-.152.18-.105.326-.25.439-.434.118-.183.204-.396.258-.638.055-.242.082-.502.082-.78v-.122c0-.274-.027-.53-.082-.768a1.959 1.959 0 00-.258-.639 1.227 1.227 0 00-1.095-.604 1.218 1.218 0 00-1.084.604 2.094 2.094 0 00-.252.639 3.408 3.408 0 00-.082.768zm6.952-5.778V60h-1.547v-9.006h1.547zm3.973 2.666l-2.76 3.1-1.494 1.517-.492-1.2 1.154-1.454 1.723-1.963h1.869zM170.486 60l-1.963-2.953 1.031-1.002L172.279 60h-1.793zm3.823-5.04V60h-1.547v-6.34h1.459l.088 1.3zm-.228 1.642h-.475c0-.442.053-.848.158-1.22.11-.37.27-.692.481-.966.211-.277.47-.492.779-.644a2.443 2.443 0 011.084-.229c.285 0 .547.043.785.129.238.082.443.213.615.393.176.175.311.406.405.69.093.282.14.62.14 1.014V60h-1.547v-4.072c0-.297-.043-.53-.129-.697a.696.696 0 00-.357-.352 1.363 1.363 0 00-.562-.106c-.243 0-.452.05-.627.147a1.207 1.207 0 00-.428.392c-.11.169-.192.362-.246.58a3.12 3.12 0 00-.076.71zm3.855-.287l-.639.117c.004-.399.059-.772.164-1.12.106-.351.26-.658.463-.92.207-.265.463-.472.768-.62a2.376 2.376 0 011.066-.229c.313 0 .594.045.844.135.254.086.471.224.65.416.18.187.317.431.411.732.097.301.146.668.146 1.102V60h-1.559v-4.078c0-.309-.042-.545-.128-.71a.675.675 0 00-.358-.339 1.4 1.4 0 00-.551-.1 1.162 1.162 0 00-.961.451c-.105.141-.185.305-.24.493a2.227 2.227 0 00-.076.598zm8.634 2.337v-2.924c0-.214-.037-.4-.111-.556a.81.81 0 00-.34-.363 1.173 1.173 0 00-.58-.13c-.207 0-.389.036-.545.106a.8.8 0 00-.352.299.772.772 0 00-.123.434h-1.553c0-.262.063-.51.188-.745.125-.238.303-.449.533-.632.234-.188.514-.334.838-.44a3.587 3.587 0 011.102-.158c.48 0 .908.082 1.283.246.379.16.676.402.89.727.219.324.329.732.329 1.224v2.766c0 .316.019.588.058.814.043.223.106.416.188.58v.1h-1.577a2.345 2.345 0 01-.169-.61 4.665 4.665 0 01-.059-.738zm.217-2.513l.011.92h-.978a2.41 2.41 0 00-.639.076 1.182 1.182 0 00-.451.21.861.861 0 00-.264.329 1.005 1.005 0 00-.087.428c0 .156.035.296.105.421.074.125.18.225.316.3.141.07.305.105.493.105.273 0 .511-.055.714-.164.204-.114.362-.25.475-.41a.89.89 0 00.182-.457l.445.668c-.055.16-.137.33-.246.51-.109.179-.25.347-.422.503a2.15 2.15 0 01-.621.387 2.17 2.17 0 01-.844.152c-.41 0-.777-.082-1.101-.246a1.953 1.953 0 01-.768-.674 1.735 1.735 0 01-.281-.972c0-.336.062-.633.187-.891a1.71 1.71 0 01.557-.65c.246-.18.551-.315.914-.405.367-.094.787-.14 1.26-.14h1.043zm4.163-1.184V60h-1.547v-6.34h1.465l.082 1.295zm1.928-1.336l-.024 1.441a4.051 4.051 0 00-.592-.047c-.238 0-.447.034-.627.1-.179.063-.33.155-.451.276a1.21 1.21 0 00-.269.445 1.9 1.9 0 00-.106.586l-.334-.041c0-.402.041-.776.123-1.12a3.14 3.14 0 01.358-.902c.156-.257.351-.457.586-.597.238-.145.511-.217.82-.217.086 0 .178.008.275.023.102.012.182.03.241.053zm2.276-2.625V60h-1.547v-9.006h1.547zm3.973 2.666l-2.76 3.1-1.494 1.517-.492-1.2 1.154-1.454 1.723-1.963h1.869zM197.545 60l-1.963-2.953 1.031-1.002L199.338 60h-1.793zm6.791-6.34V60h-1.553v-6.34h1.553zm-1.658-1.658a.77.77 0 01.234-.574c.16-.153.375-.229.645-.229.269 0 .482.076.638.229a.757.757 0 01.241.574.75.75 0 01-.241.568c-.156.153-.369.229-.638.229-.27 0-.485-.076-.645-.229a.762.762 0 01-.234-.568zm6.015 1.658v1.113h-3.633V53.66h3.633zm-2.661-1.558h1.553v6.07c0 .187.026.332.076.434.051.101.127.17.229.204.101.036.222.053.363.053.102 0 .195-.006.281-.017.086-.012.159-.024.217-.035l.006 1.16a2.908 2.908 0 01-.439.105 3.274 3.274 0 01-.545.041c-.348 0-.653-.058-.914-.176a1.309 1.309 0 01-.61-.58c-.144-.27-.217-.625-.217-1.066v-6.193zm3.636 7.142c0-.234.08-.431.241-.592.16-.16.376-.24.65-.24.273 0 .49.08.65.24.16.16.241.358.241.592 0 .23-.081.426-.241.586-.16.156-.377.235-.65.235-.274 0-.49-.079-.65-.235a.795.795 0 01-.241-.586zm7.395-7.775v10.113h-.978V51.469h.978zM227.3 54.99v1.266h-4.489V54.99h4.489zm-4.049-3.521V60h-1.612v-8.531h1.612zm5.244 0V60h-1.611v-8.531h1.611zm1.128 5.425v-.122c0-.465.066-.893.199-1.284a2.97 2.97 0 01.58-1.025c.254-.29.565-.514.932-.674a3.042 3.042 0 011.254-.246c.476 0 .898.082 1.265.246.372.16.684.385.938.674.254.289.447.63.58 1.025.133.39.199.819.199 1.284v.123c0 .46-.066.888-.199 1.283-.133.39-.326.732-.58 1.025-.254.29-.565.514-.932.674-.367.16-.787.24-1.259.24-.469 0-.889-.08-1.26-.24a2.603 2.603 0 01-.938-.674 3.042 3.042 0 01-.58-1.025 3.993 3.993 0 01-.199-1.283zm1.547-.122v.123c0 .277.027.537.082.779.055.242.139.455.252.639.113.183.26.328.439.433.184.102.403.152.657.152.25 0 .464-.05.644-.152.18-.105.326-.25.44-.434a1.98 1.98 0 00.257-.638c.055-.242.082-.502.082-.78v-.122c0-.274-.027-.53-.082-.768a1.98 1.98 0 00-.257-.639 1.234 1.234 0 00-1.096-.603 1.218 1.218 0 00-1.084.603 2.094 2.094 0 00-.252.639 3.408 3.408 0 00-.082.768zm6.946-1.811V60h-1.547v-6.34h1.459l.088 1.3zm-.228 1.64h-.475c0-.44.053-.847.158-1.218.11-.371.27-.694.481-.967.211-.277.47-.492.779-.644a2.446 2.446 0 011.084-.229c.285 0 .547.043.785.129.239.082.444.213.615.393.176.175.311.406.405.69.094.282.14.62.14 1.014V60h-1.546v-4.072c0-.297-.043-.53-.129-.697a.698.698 0 00-.358-.352 1.363 1.363 0 00-.562-.106 1.27 1.27 0 00-.627.147 1.207 1.207 0 00-.428.392 1.914 1.914 0 00-.246.58 3.12 3.12 0 00-.076.71zm3.855-.286l-.638.117c.003-.399.058-.772.164-1.12.105-.351.259-.658.462-.92.208-.265.463-.472.768-.62a2.379 2.379 0 011.066-.229c.313 0 .594.045.844.135.254.086.471.224.651.416.179.187.316.431.41.732.097.301.146.668.146 1.102V60h-1.558v-4.078c0-.309-.043-.545-.129-.71a.671.671 0 00-.358-.339 1.4 1.4 0 00-.55-.1 1.22 1.22 0 00-.563.123 1.15 1.15 0 00-.398.329c-.106.14-.186.304-.241.492-.05.183-.076.383-.076.598zm7.99 3.802c-.481 0-.913-.078-1.295-.234a2.847 2.847 0 01-.979-.65 2.99 2.99 0 01-.615-.98 3.401 3.401 0 01-.211-1.206v-.234c0-.489.07-.932.211-1.33.141-.403.34-.749.598-1.038.257-.289.566-.511.925-.668.36-.156.756-.234 1.19-.234.449 0 .845.076 1.189.229.344.148.631.359.862.632.23.274.404.602.521.985.117.379.176.798.176 1.26v.65h-4.969v-1.067h3.445v-.117a1.848 1.848 0 00-.14-.674 1.077 1.077 0 00-.399-.492c-.179-.125-.412-.187-.697-.187-.23 0-.432.05-.603.152a1.208 1.208 0 00-.422.422 2.06 2.06 0 00-.246.645 3.88 3.88 0 00-.082.831v.235c0 .266.035.512.105.738.074.227.182.424.322.592.145.164.317.293.516.387.203.09.434.134.691.134.325 0 .618-.062.879-.187.266-.129.496-.318.692-.568l.779.808a2.604 2.604 0 01-.539.563c-.223.18-.492.326-.809.44-.316.108-.681.163-1.095.163z"
                    fill="#fff"
                  />
                </g>
                <path
                  d="M403 52v5m0 5v-5m0 0h-5m5 0h5M942 55l4 4 4-4"
                  stroke="#BEC1C5"
                  strokeWidth={1.5}
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  transform="translate(48 74)"
                  fill="#35363A"
                  d="M0 0H920V36H0z"
                />
                <path
                  d="M76 92H64m0 0l6-6m-6 6l6 6M96 92h12m0 0l-6-6m6 6l-6 6"
                  stroke="#F1F3F4"
                  strokeWidth={1.5}
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M129.25 92a4.75 4.75 0 018.572-2.822L136 91h5v-5l-2.109 2.109a6.25 6.25 0 10.677 6.732.75.75 0 10-1.336-.682A4.75 4.75 0 01129.25 92z"
                  fill="#F1F3F4"
                />
                <rect
                  x={156}
                  y={78}
                  width={704}
                  height={28}
                  rx={14}
                  fill="#202124"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M174 87a2.5 2.5 0 00-2.5 2.5v1h-.5a1 1 0 00-1 1v5a1 1 0 001 1h6a1 1 0 001-1v-5a1 1 0 00-1-1h-.5v-1A2.5 2.5 0 00174 87zm1.5 3.5v-1a1.5 1.5 0 00-3 0v1h3z"
                  fill="#9BA0A5"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M810.442 85.558a.625.625 0 00-.884 0l-2 2a.625.625 0 00.884.884l.933-.933V94a.625.625 0 001.25 0v-6.491l.933.933a.625.625 0 00.884-.884l-2-2zm-4.817 5.942c0-.483.392-.875.875-.875h1a.625.625 0 000-1.25h-1a2.125 2.125 0 00-2.125 2.125v6c0 1.174.951 2.125 2.125 2.125h7a2.125 2.125 0 002.125-2.125v-6a2.125 2.125 0 00-2.125-2.125h-1a.625.625 0 000 1.25h1c.483 0 .875.392.875.875v6a.875.875 0 01-.875.875h-7a.875.875 0 01-.875-.875v-6zM841.382 85.88c.194-.599 1.042-.599 1.236 0l1.295 3.986h4.192c.63 0 .891.806.382 1.176l-3.391 2.464 1.295 3.986c.195.6-.491 1.097-1 .727L842 95.755l-3.391 2.464c-.509.37-1.195-.128-1-.727l1.295-3.986-3.391-2.464c-.509-.37-.248-1.176.382-1.176h4.192l1.295-3.986zm.618 2.142l-.859 2.645a.65.65 0 01-.618.45h-2.781l2.249 1.634a.65.65 0 01.237.727l-.86 2.644 2.25-1.634a.65.65 0 01.764 0l2.25 1.634-.859-2.644a.65.65 0 01.236-.727l2.249-1.635h-2.78a.65.65 0 01-.619-.449L842 88.022z"
                  fill="#BDBDBE"
                />
                <path
                  d="M195.325 95.735v-3.807c0-.292-.059-.545-.178-.76a1.16 1.16 0 00-.519-.505c-.232-.118-.52-.178-.861-.178-.319 0-.6.055-.841.164-.237.11-.424.253-.561.431a.944.944 0 00-.198.574h-1.265c0-.264.069-.526.205-.786.137-.26.333-.494.588-.704.26-.214.57-.383.93-.506.365-.127.77-.191 1.217-.191.538 0 1.012.09 1.422.273.414.183.738.458.97.827.237.365.356.823.356 1.374v3.446c0 .246.02.508.061.786.046.278.112.517.199.718V97h-1.32a2.334 2.334 0 01-.15-.581 4.613 4.613 0 01-.055-.684zm.219-3.22l.014.89h-1.279c-.36 0-.681.029-.964.088a2.216 2.216 0 00-.711.253 1.202 1.202 0 00-.437.43c-.1.17-.15.368-.15.596 0 .232.052.444.157.635.105.192.262.344.472.458.214.11.476.164.786.164a2.08 2.08 0 001.025-.246c.296-.164.531-.364.704-.601.178-.237.274-.468.287-.69l.54.608a1.841 1.841 0 01-.259.635 3.064 3.064 0 01-1.402 1.197 2.715 2.715 0 01-1.08.205c-.501 0-.941-.098-1.319-.294a2.25 2.25 0 01-.875-.786 2.082 2.082 0 01-.308-1.115c0-.396.078-.745.233-1.045.154-.306.378-.559.669-.76.292-.204.643-.36 1.053-.464.41-.105.868-.157 1.374-.157h1.47zm4.3-1.49v8.819h-1.272v-10.24h1.162l.11 1.421zm4.983 2.215v.144c0 .537-.064 1.037-.191 1.497a3.691 3.691 0 01-.561 1.19c-.241.337-.54.599-.895.785-.356.187-.764.28-1.224.28-.469 0-.884-.077-1.244-.232a2.457 2.457 0 01-.916-.676 3.463 3.463 0 01-.602-1.067 6.18 6.18 0 01-.3-1.401v-.766a6.418 6.418 0 01.307-1.47c.151-.433.349-.802.595-1.107.251-.31.554-.545.909-.704a2.91 2.91 0 011.231-.246c.464 0 .877.09 1.237.273.36.178.663.433.909.766.246.332.431.731.554 1.196.127.46.191.973.191 1.538zm-1.271.144v-.144c0-.369-.039-.715-.117-1.039a2.616 2.616 0 00-.362-.861 1.718 1.718 0 00-.615-.588 1.75 1.75 0 00-.896-.219c-.319 0-.597.055-.834.164-.232.11-.43.258-.594.445a2.366 2.366 0 00-.404.629 3.62 3.62 0 00-.225.724v1.77c.091.32.219.62.383.903.164.278.382.503.656.677.273.168.617.253 1.032.253.342 0 .636-.071.882-.212.251-.146.456-.344.615-.595a2.7 2.7 0 00.362-.861c.078-.328.117-.677.117-1.046zm4.149-2.359v8.819h-1.271v-10.24h1.162l.109 1.421zm4.983 2.215v.144c0 .537-.063 1.037-.191 1.497a3.69 3.69 0 01-.56 1.19c-.242.337-.541.599-.896.785-.355.187-.763.28-1.224.28-.469 0-.884-.077-1.244-.232a2.457 2.457 0 01-.916-.676 3.461 3.461 0 01-.601-1.067 6.18 6.18 0 01-.301-1.401v-.766a6.471 6.471 0 01.307-1.47c.151-.433.349-.802.595-1.107.251-.31.554-.545.909-.704a2.91 2.91 0 011.231-.246 2.7 2.7 0 011.237.273c.36.178.663.433.909.766.246.332.431.731.554 1.196.128.46.191.973.191 1.538zm-1.271.144v-.144c0-.369-.039-.715-.116-1.039a2.617 2.617 0 00-.363-.861 1.718 1.718 0 00-.615-.588 1.747 1.747 0 00-.895-.219c-.319 0-.597.055-.834.164-.233.11-.431.258-.595.445a2.363 2.363 0 00-.403.629 3.56 3.56 0 00-.226.724v1.77c.091.32.219.62.383.903.164.278.383.503.656.677.274.168.618.253 1.032.253.342 0 .636-.071.882-.212.251-.146.456-.344.615-.595.165-.25.285-.538.363-.861.077-.328.116-.677.116-1.046zm2.905 2.946c0-.214.066-.394.199-.54.136-.15.332-.226.587-.226.256 0 .449.076.581.226a.76.76 0 01.206.54.75.75 0 01-.206.533c-.132.146-.325.219-.581.219-.255 0-.451-.073-.587-.219a.762.762 0 01-.199-.533zm3.664-9.83h1.272v9.064l-.11 1.436h-1.162V86.5zm6.269 6.74v.144c0 .537-.064 1.037-.192 1.497a3.669 3.669 0 01-.56 1.19c-.246.337-.547.599-.902.785-.356.187-.764.28-1.224.28-.469 0-.882-.079-1.237-.239a2.437 2.437 0 01-.889-.704 3.634 3.634 0 01-.581-1.107 7.014 7.014 0 01-.294-1.463v-.629a7.025 7.025 0 01.294-1.47c.146-.433.339-.802.581-1.107.242-.31.538-.545.889-.704.351-.164.758-.246 1.223-.246.465 0 .878.09 1.238.273.36.178.66.433.902.766.246.332.433.731.56 1.196.128.46.192.973.192 1.538zm-1.272.144v-.144c0-.369-.034-.715-.102-1.039a2.715 2.715 0 00-.328-.861 1.64 1.64 0 00-.595-.588c-.246-.146-.549-.219-.909-.219-.319 0-.597.055-.834.164-.233.11-.431.258-.595.445a2.363 2.363 0 00-.403.629c-.1.232-.176.474-.226.724v1.648c.073.319.192.626.356.922.168.292.392.531.67.718.282.187.631.28 1.045.28.342 0 .634-.068.876-.205.246-.14.444-.335.594-.58.155-.247.269-.532.342-.855.073-.324.109-.67.109-1.04zm4.129-2.31V97h-1.271v-7.397h1.203l.068 1.47zm-.259 1.948l-.588-.021c.004-.506.07-.973.198-1.401.127-.433.317-.81.567-1.128.251-.32.563-.565.937-.739.373-.177.806-.266 1.299-.266.346 0 .665.05.957.15.291.096.544.249.758.458.215.21.381.479.499.807.119.328.178.724.178 1.19V97h-1.264v-4.867c0-.388-.067-.697-.199-.93a1.13 1.13 0 00-.547-.506 1.973 1.973 0 00-.834-.164c-.373 0-.685.066-.936.198a1.586 1.586 0 00-.602.547c-.15.233-.259.5-.328.8a4.46 4.46 0 00-.095.944zm4.792-.698l-.848.26c.004-.406.071-.795.198-1.169.132-.374.321-.706.567-.998.251-.292.559-.522.923-.69.365-.174.782-.26 1.251-.26.397 0 .748.052 1.053.157.31.105.57.267.779.485.215.215.376.49.486.828.109.337.164.738.164 1.203V97h-1.272v-4.874c0-.415-.066-.736-.198-.964a1.034 1.034 0 00-.547-.485 2.183 2.183 0 00-.834-.144c-.278 0-.524.048-.738.144a1.53 1.53 0 00-.54.396 1.72 1.72 0 00-.335.568 2.105 2.105 0 00-.109.683zm7.751-1.558V97h-1.264v-7.397h1.23l.034 1.163zm2.311-1.204l-.007 1.176a1.82 1.82 0 00-.301-.04 3.196 3.196 0 00-.314-.014c-.292 0-.549.045-.773.136a1.604 1.604 0 00-.567.383 1.84 1.84 0 00-.369.588c-.087.223-.144.47-.171.738l-.355.205c0-.446.043-.865.129-1.257.092-.392.231-.739.417-1.04.187-.305.424-.542.711-.71.292-.174.638-.26 1.039-.26.092 0 .196.011.315.034.118.018.2.039.246.061zm2.44-3.062V97h-1.271V86.5h1.271zm4.519 3.103l-3.227 3.453-1.804 1.873-.103-1.347 1.292-1.545 2.297-2.434h1.545zM247.511 97l-2.639-3.527.656-1.128L249.001 97h-1.49zm2.481-.67c0-.214.066-.394.198-.54.137-.15.333-.226.588-.226.256 0 .449.076.581.226a.759.759 0 01.205.54.75.75 0 01-.205.533c-.132.146-.325.219-.581.219-.255 0-.451-.073-.588-.219a.766.766 0 01-.198-.533zm6.631-.232c.301 0 .579-.062.834-.185a1.72 1.72 0 00.629-.506 1.41 1.41 0 00.28-.745h1.203a2.252 2.252 0 01-.444 1.224 3.032 3.032 0 01-1.06.909 3.072 3.072 0 01-1.442.342c-.556 0-1.041-.098-1.456-.294a2.883 2.883 0 01-1.025-.807 3.608 3.608 0 01-.609-1.176 4.968 4.968 0 01-.198-1.415v-.287c0-.496.066-.966.198-1.408.137-.447.34-.84.609-1.183.273-.341.615-.61 1.025-.806.415-.196.9-.294 1.456-.294.579 0 1.085.118 1.518.355.433.233.772.552 1.018.957.251.401.388.857.41 1.368h-1.203a1.817 1.817 0 00-.26-.828 1.614 1.614 0 00-.601-.588 1.684 1.684 0 00-.882-.225c-.387 0-.713.077-.977.232-.26.15-.468.356-.623.615a2.9 2.9 0 00-.328.855c-.063.31-.095.627-.095.95v.287c0 .324.032.643.095.957.064.315.171.6.322.855.155.255.362.46.622.615.264.15.592.226.984.226zm7.328 0c.301 0 .579-.062.834-.185a1.72 1.72 0 00.629-.506c.164-.218.258-.467.28-.745h1.203c-.022.438-.17.845-.444 1.224a3.037 3.037 0 01-2.502 1.25c-.556 0-1.041-.097-1.456-.293a2.883 2.883 0 01-1.025-.807 3.608 3.608 0 01-.609-1.176 4.968 4.968 0 01-.198-1.415v-.287c0-.496.066-.966.198-1.408.137-.447.34-.84.609-1.183.273-.341.615-.61 1.025-.806.415-.196.9-.294 1.456-.294.579 0 1.085.118 1.518.355.433.233.772.552 1.018.957.251.401.388.857.41 1.368h-1.203a1.816 1.816 0 00-.259-.828 1.624 1.624 0 00-.602-.588 1.684 1.684 0 00-.882-.225c-.387 0-.713.077-.977.232-.26.15-.467.356-.622.615-.151.256-.26.54-.329.855-.063.31-.095.627-.095.95v.287c0 .324.032.643.095.957.064.315.171.6.322.855.155.255.362.46.622.615.264.15.592.226.984.226z"
                  fill="#fff"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M884.5 87h2.5a2 2 0 012 2v2.5h1.5a1.5 1.5 0 010 3H889V97a2 2 0 01-2 2h-2.5v-1.5a1.5 1.5 0 00-3 0V99H879a2 2 0 01-2-2v-2.5h1.5a1.5 1.5 0 000-3H877V89a2 2 0 012-2h2.5v-1a1.5 1.5 0 013 0v1zM923 85h-14v14h14V85zm-5 2h-7v10h7V87zM948 87a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm0 5.25a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM946.5 99a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"
                  fill="#C4C4C4"
                />
                <path
                  transform="translate(48 110)"
                  fill="#606164"
                  d="M0 0H920V1H0z"
                />
                <path
                  transform="translate(48 111)"
                  fill="#F5F5F5"
                  d="M0 0H920V492H0z"
                />
              </g>
              <rect
                x={48.25}
                y={32.25}
                width={919.5}
                height={570.5}
                rx={9.75}
                stroke="#080808"
                strokeWidth={0.5}
              />
            </g>
            <defs>
              <filter
                id="filter0_d_25_285"
                x={0}
                y={0}
                width={1016}
                height={667}
                filterUnits="userSpaceOnUse"
                colorInterpolationFilters="sRGB"
              >
                <feFlood floodOpacity={0} result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset dy={16} />
                <feGaussianBlur stdDeviation={24} />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" />
                <feBlend
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_25_285"
                />
                <feBlend
                  in="SourceGraphic"
                  in2="effect1_dropShadow_25_285"
                  result="shape"
                />
              </filter>
              <clipPath id="clip0_25_285">
                <rect
                  x={48}
                  y={32}
                  width={920}
                  height={571}
                  rx={10}
                  fill="#000"
                />
              </clipPath>
              {/* <clipPath id="clip1_25_285">
                <path
                  d="M135 48a8 8 0 018-8h224a8 8 0 018 8v26H135V48z"
                  fill="#000"
                />
              </clipPath> */}
            </defs>
          </svg>

          {/* eslint-disable-next-line @next/next/no-img-element */}
          <img src={'https://bmrk.cc/images/og.jpg'} alt="Bookmark It." />
        </div>
      ),
      {
        width: 1200,
        height: 630,
        fonts: [
          {
            name: 'Inter SemiBold',
            data: fontDataSemiBold,
          },
          {
            name: 'Inter',
            data: fontDataRegular,
          },
        ],
      },
    );
  } catch (error) {
    console.log('error', error);

    return new Response(`Failed to generate the image`, {
      status: 500,
    });
  }
}
